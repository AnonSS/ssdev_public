---
accounts::user_list:
  pfuser:
    groups:
      - 'pfuser'
    managehome: false
    system: true
classes:
  - profile::base_linux
  - profile::java
  - profile::sso
profile::base_linux::awscli: true
profile::base_linux::postfix: true
profile::base_linux::gralog: true
profile::sso::pf_user: pfuser
# profile::sso::pf_pass: pfpass
profile::sso::pf_version: '11.0.2'
profile::sso::java_home: '/usr/java/jdk-11.0.2+9-jre' #'/usr/java/jdk-11.0.2+9'
profile::sso::pf_home: '/opt/pingfederate-11.0.2/pingfederate' #'/usr/java/jdk-11.0.2+9'
profile::java::version: 'latest'
profile::java::distribution: 'jre'
profile::java::java_home: '/usr/java/jdk-11.0.2+9-jre' #'/usr/java/jdk-11.0.2+9'
profile::java::j_version: '11'
profile::java::jre_version: '11'
profile::java::jdk_version: '8'
profile::java::version_major: '11.0.2'
profile::java::version_minor: '9'
profile::java::java_path: '/usr/java/jdk-11.0.2+9-jre/bin:$PATH'
profile::java::mem: '-Xmx1g'
# Backup log files
cron::job:
  'ssobackup':
    command: "aws s3 cp %{lookup('ssoconfig_dest')} s3://pingfe/%{facts.fqdn}-pf-logs"
    minute: 58
    hour: 14
    date: '*'
    month: '*'
    weekday: '*'
    user: root
    environment:
      - 'MAILTO=root'
      - 'PATH="/usr/local/bin/:/usr/bin:/bin"'
    description: 'sso backup'
